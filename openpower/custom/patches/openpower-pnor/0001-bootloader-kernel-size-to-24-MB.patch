From 4fdd0e51cf718b7755fd5f9032664172c8c1028b Mon Sep 17 00:00:00 2001
From: jim <jim.yuan@supermicro.com>
Date: Fri, 15 Sep 2017 09:31:05 -0700
Subject: [PATCH] bootloader kernel size to 24 MB.

---
 p9Layouts/defaultPnorLayout_64.xml | 32 ++++++++++++++++----------------
 1 file changed, 16 insertions(+), 16 deletions(-)

diff --git a/p9Layouts/defaultPnorLayout_64.xml b/p9Layouts/defaultPnorLayout_64.xml
index 57a527d..c25d4f8 100644
--- a/p9Layouts/defaultPnorLayout_64.xml
+++ b/p9Layouts/defaultPnorLayout_64.xml
@@ -205,17 +205,17 @@ Layout Description
         <sha512Version/>
     </section>
     <section>
-        <description>Bootloader Kernel (15MB)</description>
+        <description>Bootloader Kernel (24MB)</description>
         <eyeCatch>BOOTKERNEL</eyeCatch>
         <physicalOffset>0x17E1000</physicalOffset>
-        <physicalRegionSize>0xF00000</physicalRegionSize>
+        <physicalRegionSize>0x1800000</physicalRegionSize>
         <side>A</side>
         <sha512Version/>
     </section>
     <section>
         <description>OCC Lid (1.125M)</description>
         <eyeCatch>OCC</eyeCatch>
-        <physicalOffset>0x26E1000</physicalOffset>
+        <physicalOffset>0x2FE1000</physicalOffset>
         <physicalRegionSize>0x120000</physicalRegionSize>
         <side>A</side>
         <sha512Version/>
@@ -224,7 +224,7 @@ Layout Description
     <section>
         <description>FIRDATA (12K)</description>
         <eyeCatch>FIRDATA</eyeCatch>
-        <physicalOffset>0x2801000</physicalOffset>
+        <physicalOffset>0x3101000</physicalOffset>
         <physicalRegionSize>0x3000</physicalRegionSize>
         <side>A</side>
         <ecc/>
@@ -233,7 +233,7 @@ Layout Description
     <section>
         <description>CAPP Lid (144K)</description>
         <eyeCatch>CAPP</eyeCatch>
-        <physicalOffset>0x2804000</physicalOffset>
+        <physicalOffset>0x3104000</physicalOffset>
         <physicalRegionSize>0x24000</physicalRegionSize>
         <side>A</side>
         <sha512Version/>
@@ -242,7 +242,7 @@ Layout Description
     <section>
         <description>BMC_INV (36K)</description>
         <eyeCatch>BMC_INV</eyeCatch>
-        <physicalOffset>0x2828000</physicalOffset>
+        <physicalOffset>0x3128000</physicalOffset>
         <physicalRegionSize>0x9000</physicalRegionSize>
         <side>sideless</side>
         <reprovision/>
@@ -250,7 +250,7 @@ Layout Description
     <section>
         <description>Hostboot Bootloader (28K)</description>
         <eyeCatch>HBBL</eyeCatch>
-        <physicalOffset>0x2831000</physicalOffset>
+        <physicalOffset>0x3131000</physicalOffset>
         <!-- Physical Size includes Header rounded to ECC valid size -->
         <!-- Max size of actual HBBL content is 20K and 22.5K with ECC -->
         <physicalRegionSize>0x7000</physicalRegionSize>
@@ -261,7 +261,7 @@ Layout Description
     <section>
         <description>Temporary Attribute Override (32K)</description>
         <eyeCatch>ATTR_TMP</eyeCatch>
-        <physicalOffset>0x2838000</physicalOffset>
+        <physicalOffset>0x3138000</physicalOffset>
         <physicalRegionSize>0x8000</physicalRegionSize>
         <side>A</side>
         <reprovision/>
@@ -269,7 +269,7 @@ Layout Description
     <section>
         <description>Permanent Attribute Override (32K)</description>
         <eyeCatch>ATTR_PERM</eyeCatch>
-        <physicalOffset>0x2840000</physicalOffset>
+        <physicalOffset>0x3140000</physicalOffset>
         <physicalRegionSize>0x8000</physicalRegionSize>
         <side>A</side>
         <ecc/>
@@ -278,14 +278,14 @@ Layout Description
     <section>
         <description>PNOR Version (4K)</description>
         <eyeCatch>VERSION</eyeCatch>
-        <physicalOffset>0x2848000</physicalOffset>
+        <physicalOffset>0x3148000</physicalOffset>
         <physicalRegionSize>0x1000</physicalRegionSize>
         <side>A</side>
     </section>
     <section>
         <description>IMA Catalog (256K)</description>
         <eyeCatch>IMA_CATALOG</eyeCatch>
-        <physicalOffset>0x2849000</physicalOffset>
+        <physicalOffset>0x3149000</physicalOffset>
         <physicalRegionSize>0x40000</physicalRegionSize>
         <side>A</side>
         <sha512Version/>
@@ -294,7 +294,7 @@ Layout Description
     <section>
         <description>Ref Image Ring Overrides (128K)</description>
         <eyeCatch>RINGOVD</eyeCatch>
-        <physicalOffset>0x2889000</physicalOffset>
+        <physicalOffset>0x3189000</physicalOffset>
         <physicalRegionSize>0x20000</physicalRegionSize>
         <side>A</side>
     </section>
@@ -303,7 +303,7 @@ Layout Description
         <!-- We need 266KB per module sort, going to support
              10 sorts by default, plus ECC  -->
         <eyeCatch>WOFDATA</eyeCatch>
-        <physicalOffset>0x28A9000</physicalOffset>
+        <physicalOffset>0x31A9000</physicalOffset>
         <physicalRegionSize>0x300000</physicalRegionSize>
         <side>A</side>
         <sha512Version/>
@@ -312,7 +312,7 @@ Layout Description
     <section>
         <description>Hostboot deconfig area (64KB)</description>
         <eyeCatch>HB_VOLATILE</eyeCatch>
-        <physicalOffset>0x2BA9000</physicalOffset>
+        <physicalOffset>0x34A9000</physicalOffset>
         <physicalRegionSize>0x5000</physicalRegionSize>
         <side>A</side>
         <reprovision/>
@@ -322,7 +322,7 @@ Layout Description
     <section>
         <description>MEMD extra data (28K)</description>
         <eyeCatch>MEMD</eyeCatch>
-        <physicalOffset>0x2BAE000</physicalOffset>
+        <physicalOffset>0x34AE000</physicalOffset>
         <physicalRegionSize>0x7000</physicalRegionSize>
         <side>A</side>
         <sha512Version/>
@@ -331,7 +331,7 @@ Layout Description
     <section>
         <description>SecureBoot Key Transition Partition (16K)</description>
         <eyeCatch>SBKT</eyeCatch>
-        <physicalOffset>0x2BB5000</physicalOffset>
+        <physicalOffset>0x34B5000</physicalOffset>
         <physicalRegionSize>0x4000</physicalRegionSize>
         <side>A</side>
         <sha512Version/>
-- 
2.9.2.windows.1

